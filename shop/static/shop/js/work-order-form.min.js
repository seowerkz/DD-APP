/*! doubleddistributionapp */
function cloneMore(a,b){var c=$(a).clone(!0),d=$("#id_"+b+"-TOTAL_FORMS").val();c.find(":input").each(function(){var a=$(this).attr("name").replace("-"+(d-1)+"-","-"+d+"-"),b="id_"+a;$(this).attr({name:a,id:b}).val("").removeAttr("checked")}),d++,$("#id_"+b+"-TOTAL_FORMS").val(d),$(a).after(c)}function cloneMoreCount(a,b){var c=$(a).clone(!0),d=$("#id_"+b+"-TOTAL_FORMS").val();c.find(":input").each(function(){var a=$(this).attr("name").replace("-"+(d-1)+"-","-"+d+"-"),b="id_"+a;$(this).attr({name:a,id:b}).val("").removeAttr("checked")}),d++,$("#id_"+b+"-TOTAL_FORMS").val(d),c.find(".number").text(d),$(a).after(c)}function timerIncrement(){idleTime+=1,idleTime>4&&$("#save").click()}$(document).ready(function(){setInterval(timerIncrement,6e4);$(this).mousemove(function(){idleTime=0}),$(this).keypress(function(){idleTime=0}),$("#save").on("click",function(){$("#saveOrComplete").val("save"),$("#workOrderForm").submit()}),$("#complete").on("click",function(){var a=!0;$("#odometer").val()||(a=confirm("The odometer has not been entered! Are you sure you want to save and mark complete this work order?")),a&&($("#saveOrComplete").val("complete"),$("#workOrderForm").submit())}),$("#finish").on("click",function(){$("#axonNumber").val()?$("#workOrderReviewed").is(":checked")?($("#saveOrComplete").val("finish"),$("#workOrderForm").submit()):(alert("You must have the work order reviewed."),$("#workOrderReviewed").focus()):(alert("You must enter an axon number."),$("#axonNumber").focus())}),$("#add_more_parts").click(function(){cloneMore("div.part-form:last","partsused_set")}),$("#add_more_mechanics").click(function(){cloneMore("div.mechanic-form:last","workordermechanics_set")}),$(".part-select").append($("<option/>",{value:"Other",text:"Other"})),$(".part-select").on("change",function(){"Other"==$(this).val()?$(this).siblings(".new-part").removeClass("hidden"):$(this).siblings(".new-part").addClass("hidden")}),$("#add_more_work_performed").click(function(){cloneMoreCount("div.work_performed-form:last","workperformed_set")}),$("#add_more_problems").click(function(){cloneMoreCount("div.problem-form:last","servicerequestproblem_set")}),$("#add_more_images").click(function(){$(".fileinput").first().clone().appendTo("#images")})});