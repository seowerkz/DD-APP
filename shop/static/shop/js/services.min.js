/*! doubleddistributionapp */
function star_events(){$(".stars").rating({min:0,max:5,step:1,size:"xs",showCaption:!1}),$(".stars").on("rating.change",function(a,b){var c=a.target;$.ajax({url:"/drivers/request/edit/"+c.dataset.requestId+"/",type:"POST",data:{stars:b},error:function(a){alert("An error has occurred. "+a)},success:function(a){reset_data(a)}})}),$(".stars").on("rating.clear",function(a){var b=a.target;$.ajax({url:"/drivers/request/edit/"+b.dataset.requestId+"/",type:"POST",data:{stars:0},error:function(a){alert("An error has occurred. "+a)},success:function(){window.location.reload()}})})}function reset_data(a){var b=$("#inTheYardTable").dataTable();null!=b&&b.fnDestroy();for(var c="",d=0;d<a.length;d++){var e=a[d];c+="<tr>",c+="<td>"+e.created_by+"</td>",c+="<td>"+e.equipment+"</td>",c+="<td>"+e.created_at+"</td>",c+="<td><input type='number' class='stars' value='"+e.priority+"' data-request-id='"+e.id+"'><span class='hidden'>"+e.priority+"</span></td>";var f="";f=null!=e.work_order?"<a href='/shop/workorder/edit/"+e.work_order+"/'>Edit</a>":"<a href='/shop/workorder/add/?service_request_id="+e.id+"'>Edit</a>",on_the_road_link='<a href="/drivers/move_to_road/'+e.id+'/"><i class="fa fa-arrow-circle-down"></i></a>',c+="<td>"+f+" "+on_the_road_link+"</td>",c+="<td><a href='/shop/services/print/"+e.id+"/'>Print</a></td>",c+="</tr>"}$(".serviceBody").html(c),$("#inTheYardTable").dataTable(in_the_yard_table_options),star_events()}$(document).ready(function(){star_events(),$("#batch-print").on("click",function(){window.location.href="/shop/workorder/print_batch/"+$("#batch-input").val()+"/"}),$(".expected-date").on("blur",function(){if(this.value!=this.defaultValue){var a=$(this).data("id"),b=this.value;$.ajax({url:"/drivers/request/edit/"+a+"/",type:"POST",data:{expected_date:b},error:function(a){alert("An error has occurred. "+a)},success:function(){window.location.reload()}})}})});var in_the_yard_table_options={language:{aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"},emptyTable:"No data available in table",info:"Showing _START_ to _END_ of _TOTAL_ entries",infoEmpty:"No entries found",infoFiltered:"(filtered1 from _MAX_ total entries)",lengthMenu:"Show _MENU_ entries",search:"Search:",zeroRecords:"No matching records found"},bStateSave:!1,columns:[{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!1},{orderable:!1}],lengthMenu:[[5,15,20,-1],[5,15,20,"All"]],order:[[3,"desc"],[2,"asc"]],pageLength:20,pagingType:"bootstrap_full_number",language:{search:"Search: ",lengthMenu:"  _MENU_ records",paginate:{previous:"Prev",next:"Next",last:"Last",first:"First"}}},on_the_road_table_options={language:{aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"},emptyTable:"No data available in table",info:"Showing _START_ to _END_ of _TOTAL_ entries",infoEmpty:"No entries found",infoFiltered:"(filtered1 from _MAX_ total entries)",lengthMenu:"Show _MENU_ entries",search:"Search:",zeroRecords:"No matching records found"},bStateSave:!1,columns:[{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!1},{orderable:!1}],lengthMenu:[[5,15,20,-1],[5,15,20,"All"]],order:[[3,"desc"],[2,"asc"]],pageLength:20,pagingType:"bootstrap_full_number",language:{search:"Search: ",lengthMenu:"  _MENU_ records",paginate:{previous:"Prev",next:"Next",last:"Last",first:"First"}}},TableManaged=function(){var a=function(){var a=$("#inTheYardTable");a.dataTable(in_the_yard_table_options);var b=jQuery("#inTheYardTable_wrapper");b.find(".dataTables_length select").addClass("form-control input-xsmall input-inline")},b=function(){var a=$("#completedServicesTable");a.dataTable({language:{aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"},emptyTable:"No data available in table",info:"Showing _START_ to _END_ of _TOTAL_ entries",infoEmpty:"No entries found",infoFiltered:"(filtered1 from _MAX_ total entries)",lengthMenu:"Show _MENU_ entries",search:"Search:",zeroRecords:"No matching records found"},bStateSave:!1,columns:[{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!1},{orderable:!1}],lengthMenu:[[5,15,20,-1],[5,15,20,"All"]],order:[],pageLength:20,pagingType:"bootstrap_full_number",language:{search:"Search: ",lengthMenu:"  _MENU_ records",paginate:{previous:"Prev",next:"Next",last:"Last",first:"First"}}});var b=jQuery("#completedServicesTable_wrapper");b.find(".dataTables_length select").addClass("form-control input-xsmall input-inline")},c=function(){var a=$("#enteredServicesTable");a.dataTable({language:{aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"},emptyTable:"No data available in table",info:"Showing _START_ to _END_ of _TOTAL_ entries",infoEmpty:"No entries found",infoFiltered:"(filtered1 from _MAX_ total entries)",lengthMenu:"Show _MENU_ entries",search:"Search:",zeroRecords:"No matching records found"},bStateSave:!1,columns:[{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!1},{orderable:!1}],lengthMenu:[[5,15,20,-1],[5,15,20,"All"]],order:[],pageLength:20,pagingType:"bootstrap_full_number",language:{search:"Search: ",lengthMenu:"  _MENU_ records",paginate:{previous:"Prev",next:"Next",last:"Last",first:"First"}}});var b=jQuery("#enteredServicesTable_wrapper");b.find(".dataTables_length select").addClass("form-control input-xsmall input-inline")},d=function(){var a=$("#newWorkOrdersTable");a.dataTable({language:{aria:{sortAscending:": activate to sort column ascending",sortDescending:": activate to sort column descending"},emptyTable:"No data available in table",info:"Showing _START_ to _END_ of _TOTAL_ entries",infoEmpty:"No entries found",infoFiltered:"(filtered1 from _MAX_ total entries)",lengthMenu:"Show _MENU_ entries",search:"Search:",zeroRecords:"No matching records found"},bStateSave:!1,columns:[{orderable:!0},{orderable:!0},{orderable:!0},{orderable:!1},{orderable:!1}],lengthMenu:[[5,15,20,-1],[5,15,20,"All"]],order:[],pageLength:20,pagingType:"bootstrap_full_number",language:{search:"Search: ",lengthMenu:"  _MENU_ records",paginate:{previous:"Prev",next:"Next",last:"Last",first:"First"}}});var b=jQuery("#newWorkOrdersTable_wrapper");b.find(".dataTables_length select").addClass("form-control input-xsmall input-inline")},e=function(){var a=$("#onTheRoadTable");a.dataTable(on_the_road_table_options);var b=jQuery("#onTheRoadTable_wrapper");b.find(".dataTables_length select").addClass("form-control input-xsmall input-inline")};return{init:function(){jQuery().dataTable&&(a(),b(),d(),e(),c())}}}();